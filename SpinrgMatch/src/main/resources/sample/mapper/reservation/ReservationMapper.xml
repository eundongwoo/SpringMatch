<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sample.mapper.reservation.ReservationMapper">
	<insert id="addReservation"  >
		<![CDATA[
			insert into reservation(reserve_num, member_id, place_id, operation_id, reserve_date) 
			values(reserve_num.NEXTVAL, #{memberId}, #{placeId}, #{operationId}, #{date})
			]]>
		</insert>
		
		<select id="reserveCount" parameterType="info.thecodinglive.model.ReserveDTO" resultType="Integer">
		<![CDATA[
			select count(*) from reservation where PLACE_ID=#{placeId} 
			and RESERVE_DATE=#{date} 
			and OPERATION_ID=#{operationId}
			]]>
		</select>
		
		<update id="stateUpdate" >
			<![CDATA[
			update reservation 
			set state = '예약확정'
			where PLACE_ID=#{placeId} 
			and RESERVE_DATE=#{date} 
			and OPERATION_ID=#{operationId}
			]]>
		</update>
		
		<select id="searchById" parameterType="info.thecodinglive.model.Member" resultType="info.thecodinglive.model.ReservationDTO">
		<![CDATA[
			select place_id as "placeId",
			operation_id as "operationId",
			reserve_date as "reserveDate",
			state as "state",
			reg_time as "regDate"
			from reservation
			where member_id=#{memberId}
			]]>
		</select>
		

		
		<!-- resultType="Integer" -->
	<!-- 
	insert into reservation(reserve_num, member_id, place_id, operation_id, reserve_date)
			values(reserve_num.NEXTVAL, #{memberId}, #{placeId}, #{operationId}, #{date}) -->
<!-- parameterType="info.thecodinglive.model.ReserveDTO" -->



</mapper>